// Generated by CoffeeScript 1.7.1
var current_thing, d, getProjectsJSON, init, likesAnimLoop, links, onClick, onMouseOut, onMouseOver, parseJSON, random_stuff_index, randomizeILikeStuff, scrollILike, stuff, stuff_el;

d = document;

links = [];

stuff = [];

random_stuff_index = -1;

current_thing = null;

stuff_el = d.querySelector('#stuff');

getProjectsJSON = function() {
  return $.ajax({
    type: "GET",
    url: "projects.json",
    dataType: "json",
    success: init
  });
};

parseJSON = function(data) {
  var box, i, item, pBlurb, pCat, pImage, pLink, pTitle, projectHtml, thing, thing_el, _i, _j, _len, _len1, _ref, _ref1;
  _ref = data.projects;
  for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
    item = _ref[i];
    links.push(item.link);
    pCat = "<h4>" + item.category + "</h4>";
    pTitle = "<h2>" + item.title + "</h2>";
    pImage = "<img src='" + item.image + "'/>";
    pBlurb = "<p>" + item.blurb + "</p>";
    pLink = "<a href='" + item.link + "' target='_blank'>";
    projectHtml = "<div class='project' id='" + i + "'> " + pTitle + " " + pCat + " " + pBlurb + "</div>";
    $("#content").append(projectHtml);
  }
  box = null;
  stuff_el.innerHTML = '';
  _ref1 = data.stuff;
  for (i = _j = 0, _len1 = _ref1.length; _j < _len1; i = ++_j) {
    thing = _ref1[i];
    stuff.push(thing);
    thing_el = d.createElement('a');
    thing_el.className = 'thing';
    thing_el.innerHTML = thing.name.replace(/\s/g, '&nbsp;');
    thing_el.id = i;
    stuff_el.appendChild(thing_el);
    box = thing_el.getBoundingClientRect();
    thing.left = box.left;
    thing.width = box.width;
  }
  return stuff_el.setAttribute('style', "width: " + stuff[0].width + "px");
};

randomizeILikeStuff = function() {
  random_stuff_index = Math.floor(Math.random() * stuff.length);
  current_thing = stuff[random_stuff_index];
  return console.log(current_thing);
};

scrollILike = function() {
  randomizeILikeStuff();
  stuff_el.setAttribute('style', "width: " + current_thing.width + "px");
  stuff_el.goalScrollLeft = current_thing.left - stuff[0].left;
  stuff_el.cur_scroll_left = stuff_el.scrollLeft;
  return likesAnimLoop();
};

likesAnimLoop = function() {
  if (Math.abs(stuff_el.scrollLeft - stuff_el.goalScrollLeft) < 1.1) {
    return stuff_el.scrollLeft = stuff_el.goalScrollLeft;
  } else {
    stuff_el.cur_scroll_left -= (stuff_el.cur_scroll_left - stuff_el.goalScrollLeft) * 0.08;
    stuff_el.scrollLeft = stuff_el.cur_scroll_left;
    return requestAnimationFrame(likesAnimLoop);
  }
};

init = function(data) {
  parseJSON(data);
  setTimeout((function() {
    return window.scrollTo(0, 1);
  }), 100);
  setTimeout((function() {
    return scrollILike();
  }), 1000);
  setTimeout((function() {
    return scrollILike();
  }), 4000);
  setTimeout((function() {
    return scrollILike();
  }), 8000);
  return setTimeout((function() {
    return scrollILike();
  }), 12000);
};

onMouseOver = function(evt) {
  if (evt.target.classList.contains('project')) {
    return evt.target.classList.add('hot');
  }
};

onMouseOut = function(evt) {
  if (evt.target.classList.contains('project')) {
    return evt.target.classList.remove('hot');
  }
};

onClick = function(evt) {
  if (evt.target.classList.contains('project')) {
    window.location = links[+evt.target.id];
  }
  if (evt.target.classList.contains('thing')) {
    return window.location = stuff[+evt.target.id].link;
  }
};

$(d).ready(getProjectsJSON());

d.body.addEventListener('mouseover', onMouseOver);

d.body.addEventListener('mouseout', onMouseOut);

d.body.addEventListener('click', onClick);

/*
//@ sourceMappingURL=main.map
*/
